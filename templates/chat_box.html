<!DOCTYPE html>
<html lang="en">

<!-- I have to integrate all of this shit in to the the pure code, to be functional -->
<head>
  <meta charset="UTF-8">
  <title>Chat Box, for commuinity</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js" integrity="sha512-xbQU0+iHqhVt7VIXi6vBJKPh3IQBF5B84sSHdjKiSccyX/1ZI7Vnkt2/8y8uruj63/DVmCxfUNohPNruthTEQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>


<body style="text-align: center; font-family: Arial, Helvetica, sans-serif; font-size: 14pt;">
  <div class="container">
    <h2>Chat Box</h2>
    <div>{{user}}</div>
  </div>

  <script type="text/javascript">
    $(document).ready(function(){
      var socket = io.connect('http://localhost:5000');
      var user="{{user}}" // this was my idea since the start, but I don't know why I didn't try doing it
      
      socket.on('connect', function() {
        socket.send('User connected!');
      });
      
      socket.on('message', function(data) {
        $('#messages').append($('<p>').text(data));
      });
      
      $("#sendBtn").on("click", function() {
        socket.send(user + ": " + $("#message").val());
        $("#message").val("");
      });
    });


  </script>
<!-- instead of using the username in here, I tried to passit as an argument from the chat box function on the index_redirection -->
<div id="messages" style="margin: 0 auto; width: 60%; text-align:left;min-height: 300px">
</div>
<input type="text" id="message" placeholder="Message" required>
<button id="sendBtn">Send</button>
</body>
</html>

